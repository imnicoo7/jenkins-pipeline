pipeline {
    agent any

    stages {
        
        // stage('CHECKOUT SCM') {
        //     steps {
        //         // Clona el repositorio donde está el archivo dataframe.py
        //         git  'https://github.com/imnicoo7/jenkins-pipeline.git'
        //     }
        // }

        stage('Ejecutar Script Python') {
            steps {
                echo 'Ejecutando script en Python...'
                // Ejecutar el script Python sh usado para llamar el archivo
                sh 'python3 dataframe.py'
            }
        }
    }
}


// pipeline {
//     agent any

//     stages {
        
//         stage('CHECKOUT SCM') {
//             steps {
//                 // Clona el repositorio donde está el archivo dataframe.py
//                 git  'https://github.com/imnicoo7/jenkins-pipeline.git'
//                 }
//         }
        
//         stage('Instalar pandas') {
//             steps {
//                 sh 'pip3 install pandas' // Instalar pandas porque jenkins no toma la de la maquina
//             }
//         }

//         stage('Ejecutar Script Python') {
//             steps {
//                 echo 'Ejecutando script en Python...'
//                 // Ejecutar el script Python sh usado para llamar el archivo
//                 sh 'python3 dataframe.py'
//             }
//         }

//         stage('Leer el DataFrame y tomar decisiones') {
//             steps {
//                 script {
//                     // Leer el archivo CSV generado
//                     def data = readCSV file: 'resultado.csv'

//                     // Iterar sobre las filas del DataFrame y tomar decisiones
//                     data.each { row ->
//                         if (row.Tarea == 'Hijo 1' && row.Estado == 'Pendiente') {
//                             echo 'Llamando a hijo 1...'
//                             build job: 'hijo1'
//                         } else if (row.Tarea == 'Hijo 2' && row.Estado == 'Pendiente') {
//                             echo 'Llamando a hijo 2...'
//                             build job: 'hijo2'
//                         } else {
//                             echo "No hay tareas pendientes."
//                         }
//                     }
//                 }
//             }
//         }
//     }
// }